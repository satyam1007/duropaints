---
import { Icon } from "astro-icon/components";
import "../styles/global.css";
import Logo from "../components/Logo.astro";
---

<style>
  a.active {
    color: #41a4c3;
    font-weight: bold;
  }

  a:active {
    color: #41a4c3;
  }
</style>

<header class="bg-[#0d1b2a] sticky top-0 left-0 right-0 z-50 shadow-lg">
  <!-- Top Contact Bar -->
  <div class="border-b border-[rgba(255,255,255,0.07)]">
    <div class="max-w-[1200px] mx-auto px-4 md:px-8">
      <div class="py-2 flex flex-col md:flex-row justify-between items-center">
        <!-- Contact Details -->
        <ul
          class="flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-6 text-sm font-light"
        >
          <li class="text-white flex items-center py-1 md:py-2">
            <span class="pr-2 text-xl text-[#41a4c3]">
              <Icon name="envelope" />
            </span>
            duerowpaints@gmail.com
          </li>
          <li class="relative text-white flex items-center py-1 md:py-2">
            <span class="pr-2 text-xl text-[#41a4c3]">
              <Icon name="mobile" />
            </span>
            +91 94160-41413
            <span
              class="hidden md:block absolute left-0 top-1/2 -translate-y-1/2 -translate-x-3 w-px h-4 bg-[rgba(255,255,255,0.07)]"
            ></span>
          </li>
          <li class="relative text-white flex items-center py-1 md:py-2">
            <span class="pr-2 text-xl text-[#41a4c3]">
              <Icon name="clock" />
            </span>
            9AM - 6PM
            <span
              class="hidden md:block absolute left-0 top-1/2 -translate-y-1/2 -translate-x-3 w-px h-4 bg-[rgba(255,255,255,0.07)]"
            ></span>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Main Navigation -->
  <div class="max-w-[1200px] mx-auto px-4 md:px-8">
    <nav class="flex items-center justify-between py-3">
      <!-- Mobile menu toggle button -->
      <div class="lg:hidden flex items-center justify-between p-4">
        <button
          aria-label="Open menu"
          class="lg:hidden text-white text-3xl focus:outline-none focus:ring-2 focus:ring-[#41a4c3] rounded p-1 cursor-pointer"
          id="menu-toggle"
        >
          <Icon name="humburger" />
        </button>
      </div>
      {/* Logo */}
      <div class="logo flex justify-center items-center">
        <a
          href="/"
          class="text-[36px] font-bold text-white flex items-center gap-3 justify-center"
        >
          <Logo />
        </a>
      </div>

      <!-- Desktop Menu -->
      <ul class="hidden lg:flex items-center space-x-1">
        <li>
          <a
            href="/"
            class="px-4 py-6 text-sm uppercase text-white hover:text-[#41a4c3] transition-colors font-medium relative group"
          >
            Home
            <span
              class="absolute bottom-5 left-1/2 transform -translate-x-1/2 h-0.5 bg-[#41a4c3] w-0 group-hover:w-8 transition-all duration-300"
            ></span>
          </a>
        </li>
        <li>
          <a
            href="/about"
            class="px-4 py-6 text-sm uppercase text-white hover:text-[#41a4c3] transition-colors font-medium relative group"
          >
            About us
            <span
              class="absolute bottom-5 left-1/2 transform -translate-x-1/2 h-0.5 bg-[#41a4c3] w-0 group-hover:w-8 transition-all duration-300"
            ></span>
          </a>
        </li>
        <li>
          <a
            href="/products"
            class="px-4 py-6 text-sm uppercase text-white hover:text-[#41a4c3] transition-colors font-medium relative group"
          >
            Products
            <span
              class="absolute bottom-5 left-1/2 transform -translate-x-1/2 h-0.5 bg-[#41a4c3] w-0 group-hover:w-8 transition-all duration-300"
            ></span>
          </a>
        </li>
        <li>
          <a
            href="/contact"
            class="px-4 py-6 text-sm uppercase text-white hover:text-[#41a4c3] transition-colors font-medium relative group"
          >
            Contact
            <span
              class="absolute bottom-5 left-1/2 transform -translate-x-1/2 h-0.5 bg-[#41a4c3] w-0 group-hover:w-8 transition-all duration-300"
            ></span>
          </a>
        </li>
      </ul>
    </nav>
  </div>

  <!-- Mobile Menu -->
  <div
    id="mobile-menu"
    class="lg:hidden fixed inset-0 bg-[#0d1b2a] bg-opacity-95 transform -translate-x-full transition-transform duration-300 ease-in-out z-40 overflow-y-auto"
    aria-hidden="true"
  >
    <div class="flex justify-end p-6">
      <button
        aria-label="Close menu"
        class="text-3xl text-white focus:outline-none focus:ring-2 focus:ring-[#41a4c3] rounded p-1 cursor-pointer"
        id="menu-close"
      >
        <Icon name="cross" />
      </button>
    </div>
    <ul class="flex flex-col items-center space-y-8 px-6 py-10">
      <li
        class="w-full text-center border-b border-[rgba(255,255,255,0.1)] pb-4"
      >
        <a
          href="/"
          class="text-xl font-semibold text-white hover:text-[#41a4c3] transition-colors block py-2"
          >Home</a
        >
      </li>
      <li
        class="w-full text-center border-b border-[rgba(255,255,255,0.1)] pb-4"
      >
        <a
          href="/about"
          class="text-xl font-semibold text-white hover:text-[#41a4c3] transition-colors block py-2"
          >About Us</a
        >
      </li>
      <li
        class="w-full text-center border-b border-[rgba(255,255,255,0.1)] pb-4"
      >
        <a
          href="/products"
          class="text-xl font-semibold text-white hover:text-[#41a4c3] transition-colors block py-2"
          >Products</a
        >
      </li>
      <li
        class="w-full text-center border-b border-[rgba(255,255,255,0.1)] pb-4"
      >
        <a
          href="/contact"
          class="text-xl font-semibold text-white hover:text-[#41a4c3] transition-colors block py-2"
          >Contact</a
        >
      </li>
      <!-- Mobile Contact Info -->
      <li class="w-full text-center pt-8">
        <div class="text-white space-y-4">
          <p class="flex items-center justify-center">
            <span class="pr-2 text-xl text-[#41a4c3]">
              <Icon name="envelope" />
            </span>
            duerowpaints@gmail.com
          </p>
          <p class="flex items-center justify-center">
            <span class="pr-2 text-xl text-[#41a4c3]">
              <Icon name="mobile" />
            </span>
            +91 94160-41413
          </p>
          <p class="flex items-center justify-center">
            <span class="pr-2 text-xl text-[#41a4c3]">
              <Icon name="clock" />
            </span>
            9AM - 6PM
          </p>
        </div>
      </li>
    </ul>
  </div>
</header>

<script>
  const menuToggle = document.getElementById(
    "menu-toggle"
  ) as HTMLElement | null;
  const menuClose = document.getElementById("menu-close") as HTMLElement | null;
  const mobileMenu = document.getElementById(
    "mobile-menu"
  ) as HTMLElement | null;
  const dropdownToggle = document.getElementById(
    "dropdown-toggle"
  ) as HTMLElement | null;
  const dropdownMenu = document.getElementById(
    "dropdown-menu"
  ) as HTMLElement | null;
  // Toggle menu open
  menuToggle?.addEventListener("click", () => {
    if (mobileMenu) {
      mobileMenu?.classList.remove("-translate-x-full");
      mobileMenu?.classList.add("translate-x-0");
    }
  });
  // Toggle menu close
  menuClose?.addEventListener("click", () => {
    if (mobileMenu) {
      mobileMenu?.classList.remove("translate-x-0");
      mobileMenu?.classList.add("-translate-x-full");
    }
  });
  dropdownToggle?.addEventListener("click", () => {
    // Toggle max-height to show/hide the dropdown
    if (dropdownMenu) {
      if (dropdownMenu?.classList.contains("max-h-0")) {
        dropdownMenu?.classList.remove("max-h-0");
        dropdownMenu?.classList.add("max-h-screen"); // Opens the dropdown
      } else {
        dropdownMenu?.classList.remove("max-h-screen");
        dropdownMenu?.classList.add("max-h-0"); // Closes the dropdown
      }
    }
  });

  const anchor = document.querySelectorAll("a");
  const currentURL = window.location.href;
  anchor.forEach((link) => {
    if (link.href === currentURL) {
      link.classList.add("active");
    }
  });
</script>
